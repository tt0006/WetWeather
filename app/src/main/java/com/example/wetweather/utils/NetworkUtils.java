package com.example.wetweather.utils;

import android.content.Context;
import android.net.Uri;
import android.util.Log;
import com.example.wetweather.db.WeatherDB;
import com.example.wetweather.db.WeatherItem;
import org.json.JSONException;
import org.json.JSONObject;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Scanner;

public final class NetworkUtils {

    private static final String LOG_TAG = NetworkUtils.class.getName();

    private static final String FORECAST_BASE_URL = "https://api.darksky.net/forecast";

    /* The units we want our API to return */
    private static final String units = "auto";

    /* The lang we want our API to return */
    private static final String lang = "uk";

    //KEY
    private static final String key = "DEMO";

    /* The format parameter allows us to designate whether we want JSON or XML from our API */
    private static final String LANG_PARAM = "lang";
    /* The units parameter allows us to designate whether we want metric units or imperial units */
    private static final String UNITS_PARAM = "units";

    private static final String SAMPLE_JSON_RESPONSE = "{\"latitude\":51.896893,\"longitude\":-8.486316,\"timezone\":\"Europe/Dublin\",\"currently\":{\"time\":1566340501,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"nearestStormDistance\":0,\"precipIntensity\":0.1,\"precipIntensityError\":0.1,\"precipProbability\":0.12,\"precipType\":\"rain\",\"temperature\":12.85,\"apparentTemperature\":12.85,\"dewPoint\":10.38,\"humidity\":0.85,\"pressure\":1024.84,\"windSpeed\":2.56,\"windGust\":5.13,\"windBearing\":198,\"cloudCover\":1,\"uvIndex\":0,\"visibility\":10.928,\"ozone\":348.6},\"minutely\":{\"summary\":\"Можливий незначний дощ починається за 4 хв., і закінчується за 30 хв.\",\"icon\":\"rain\",\"data\":[{\"time\":1566340500,\"precipIntensity\":0.11,\"precipIntensityError\":0.09,\"precipProbability\":0.12,\"precipType\":\"rain\"},{\"time\":1566340560,\"precipIntensity\":0.13,\"precipIntensityError\":0.11,\"precipProbability\":0.17,\"precipType\":\"rain\"},{\"time\":1566340620,\"precipIntensity\":0.14,\"precipIntensityError\":0.12,\"precipProbability\":0.23,\"precipType\":\"rain\"},{\"time\":1566340680,\"precipIntensity\":0.17,\"precipIntensityError\":0.13,\"precipProbability\":0.28,\"precipType\":\"rain\"},{\"time\":1566340740,\"precipIntensity\":0.18,\"precipIntensityError\":0.14,\"precipProbability\":0.32,\"precipType\":\"rain\"},{\"time\":1566340800,\"precipIntensity\":0.19,\"precipIntensityError\":0.14,\"precipProbability\":0.35,\"precipType\":\"rain\"},{\"time\":1566340860,\"precipIntensity\":0.2,\"precipIntensityError\":0.14,\"precipProbability\":0.38,\"precipType\":\"rain\"},{\"time\":1566340920,\"precipIntensity\":0.2,\"precipIntensityError\":0.14,\"precipProbability\":0.4,\"precipType\":\"rain\"},{\"time\":1566340980,\"precipIntensity\":0.2,\"precipIntensityError\":0.13,\"precipProbability\":0.42,\"precipType\":\"rain\"},{\"time\":1566341040,\"precipIntensity\":0.2,\"precipIntensityError\":0.13,\"precipProbability\":0.41,\"precipType\":\"rain\"},{\"time\":1566341100,\"precipIntensity\":0.2,\"precipIntensityError\":0.13,\"precipProbability\":0.43,\"precipType\":\"rain\"},{\"time\":1566341160,\"precipIntensity\":0.2,\"precipIntensityError\":0.13,\"precipProbability\":0.44,\"precipType\":\"rain\"},{\"time\":1566341220,\"precipIntensity\":0.19,\"precipIntensityError\":0.13,\"precipProbability\":0.43,\"precipType\":\"rain\"},{\"time\":1566341280,\"precipIntensity\":0.19,\"precipIntensityError\":0.12,\"precipProbability\":0.43,\"precipType\":\"rain\"},{\"time\":1566341340,\"precipIntensity\":0.18,\"precipIntensityError\":0.12,\"precipProbability\":0.43,\"precipType\":\"rain\"},{\"time\":1566341400,\"precipIntensity\":0.18,\"precipIntensityError\":0.12,\"precipProbability\":0.42,\"precipType\":\"rain\"},{\"time\":1566341460,\"precipIntensity\":0.18,\"precipIntensityError\":0.12,\"precipProbability\":0.42,\"precipType\":\"rain\"},{\"time\":1566341520,\"precipIntensity\":0.18,\"precipIntensityError\":0.11,\"precipProbability\":0.42,\"precipType\":\"rain\"},{\"time\":1566341580,\"precipIntensity\":0.18,\"precipIntensityError\":0.12,\"precipProbability\":0.41,\"precipType\":\"rain\"},{\"time\":1566341640,\"precipIntensity\":0.18,\"precipIntensityError\":0.11,\"precipProbability\":0.41,\"precipType\":\"rain\"},{\"time\":1566341700,\"precipIntensity\":0.18,\"precipIntensityError\":0.12,\"precipProbability\":0.4,\"precipType\":\"rain\"},{\"time\":1566341760,\"precipIntensity\":0.18,\"precipIntensityError\":0.12,\"precipProbability\":0.39,\"precipType\":\"rain\"},{\"time\":1566341820,\"precipIntensity\":0.18,\"precipIntensityError\":0.12,\"precipProbability\":0.38,\"precipType\":\"rain\"},{\"time\":1566341880,\"precipIntensity\":0.18,\"precipIntensityError\":0.12,\"precipProbability\":0.38,\"precipType\":\"rain\"},{\"time\":1566341940,\"precipIntensity\":0.18,\"precipIntensityError\":0.12,\"precipProbability\":0.37,\"precipType\":\"rain\"},{\"time\":1566342000,\"precipIntensity\":0.18,\"precipIntensityError\":0.12,\"precipProbability\":0.37,\"precipType\":\"rain\"},{\"time\":1566342060,\"precipIntensity\":0.19,\"precipIntensityError\":0.12,\"precipProbability\":0.37,\"precipType\":\"rain\"},{\"time\":1566342120,\"precipIntensity\":0.19,\"precipIntensityError\":0.12,\"precipProbability\":0.34,\"precipType\":\"rain\"},{\"time\":1566342180,\"precipIntensity\":0.19,\"precipIntensityError\":0.13,\"precipProbability\":0.34,\"precipType\":\"rain\"},{\"time\":1566342240,\"precipIntensity\":0.19,\"precipIntensityError\":0.13,\"precipProbability\":0.34,\"precipType\":\"rain\"},{\"time\":1566342300,\"precipIntensity\":0.2,\"precipIntensityError\":0.13,\"precipProbability\":0.32,\"precipType\":\"rain\"},{\"time\":1566342360,\"precipIntensity\":0.2,\"precipIntensityError\":0.13,\"precipProbability\":0.32,\"precipType\":\"rain\"},{\"time\":1566342420,\"precipIntensity\":0.2,\"precipIntensityError\":0.13,\"precipProbability\":0.3,\"precipType\":\"rain\"},{\"time\":1566342480,\"precipIntensity\":0.2,\"precipIntensityError\":0.14,\"precipProbability\":0.29,\"precipType\":\"rain\"},{\"time\":1566342540,\"precipIntensity\":0.2,\"precipIntensityError\":0.14,\"precipProbability\":0.29,\"precipType\":\"rain\"},{\"time\":1566342600,\"precipIntensity\":0.22,\"precipIntensityError\":0.14,\"precipProbability\":0.28,\"precipType\":\"rain\"},{\"time\":1566342660,\"precipIntensity\":0.21,\"precipIntensityError\":0.14,\"precipProbability\":0.27,\"precipType\":\"rain\"},{\"time\":1566342720,\"precipIntensity\":0.21,\"precipIntensityError\":0.15,\"precipProbability\":0.27,\"precipType\":\"rain\"},{\"time\":1566342780,\"precipIntensity\":0.21,\"precipIntensityError\":0.15,\"precipProbability\":0.26,\"precipType\":\"rain\"},{\"time\":1566342840,\"precipIntensity\":0.22,\"precipIntensityError\":0.15,\"precipProbability\":0.25,\"precipType\":\"rain\"},{\"time\":1566342900,\"precipIntensity\":0.21,\"precipIntensityError\":0.15,\"precipProbability\":0.24,\"precipType\":\"rain\"},{\"time\":1566342960,\"precipIntensity\":0.22,\"precipIntensityError\":0.15,\"precipProbability\":0.24,\"precipType\":\"rain\"},{\"time\":1566343020,\"precipIntensity\":0.22,\"precipIntensityError\":0.15,\"precipProbability\":0.23,\"precipType\":\"rain\"},{\"time\":1566343080,\"precipIntensity\":0.22,\"precipIntensityError\":0.16,\"precipProbability\":0.22,\"precipType\":\"rain\"},{\"time\":1566343140,\"precipIntensity\":0.22,\"precipIntensityError\":0.16,\"precipProbability\":0.22,\"precipType\":\"rain\"},{\"time\":1566343200,\"precipIntensity\":0.23,\"precipIntensityError\":0.16,\"precipProbability\":0.2,\"precipType\":\"rain\"},{\"time\":1566343260,\"precipIntensity\":0.22,\"precipIntensityError\":0.16,\"precipProbability\":0.2,\"precipType\":\"rain\"},{\"time\":1566343320,\"precipIntensity\":0.23,\"precipIntensityError\":0.16,\"precipProbability\":0.2,\"precipType\":\"rain\"},{\"time\":1566343380,\"precipIntensity\":0.23,\"precipIntensityError\":0.16,\"precipProbability\":0.19,\"precipType\":\"rain\"},{\"time\":1566343440,\"precipIntensity\":0.22,\"precipIntensityError\":0.16,\"precipProbability\":0.19,\"precipType\":\"rain\"},{\"time\":1566343500,\"precipIntensity\":0.24,\"precipIntensityError\":0.17,\"precipProbability\":0.18,\"precipType\":\"rain\"},{\"time\":1566343560,\"precipIntensity\":0.23,\"precipIntensityError\":0.16,\"precipProbability\":0.18,\"precipType\":\"rain\"},{\"time\":1566343620,\"precipIntensity\":0.23,\"precipIntensityError\":0.16,\"precipProbability\":0.18,\"precipType\":\"rain\"},{\"time\":1566343680,\"precipIntensity\":0.24,\"precipIntensityError\":0.17,\"precipProbability\":0.17,\"precipType\":\"rain\"},{\"time\":1566343740,\"precipIntensity\":0.23,\"precipIntensityError\":0.16,\"precipProbability\":0.16,\"precipType\":\"rain\"},{\"time\":1566343800,\"precipIntensity\":0.23,\"precipIntensityError\":0.17,\"precipProbability\":0.16,\"precipType\":\"rain\"},{\"time\":1566343860,\"precipIntensity\":0.23,\"precipIntensityError\":0.17,\"precipProbability\":0.16,\"precipType\":\"rain\"},{\"time\":1566343920,\"precipIntensity\":0.23,\"precipIntensityError\":0.17,\"precipProbability\":0.15,\"precipType\":\"rain\"},{\"time\":1566343980,\"precipIntensity\":0.23,\"precipIntensityError\":0.16,\"precipProbability\":0.15,\"precipType\":\"rain\"},{\"time\":1566344040,\"precipIntensity\":0.23,\"precipIntensityError\":0.17,\"precipProbability\":0.14,\"precipType\":\"rain\"},{\"time\":1566344100,\"precipIntensity\":0.23,\"precipIntensityError\":0.17,\"precipProbability\":0.14,\"precipType\":\"rain\"}]},\"hourly\":{\"summary\":\"Можливий невеликий дощ завтра вдень і ввечері.\",\"icon\":\"rain\",\"data\":[{\"time\":1566338400,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"precipIntensity\":0,\"precipProbability\":0,\"temperature\":12.98,\"apparentTemperature\":12.98,\"dewPoint\":10.32,\"humidity\":0.84,\"pressure\":1024.78,\"windSpeed\":2.53,\"windGust\":5.04,\"windBearing\":198,\"cloudCover\":0.91,\"uvIndex\":0,\"visibility\":10.045,\"ozone\":347.5},{\"time\":1566342000,\"summary\":\"Можливий Незначний Дощ\",\"icon\":\"rain\",\"precipIntensity\":0.1854,\"precipProbability\":0.44,\"precipType\":\"rain\",\"temperature\":12.77,\"apparentTemperature\":12.77,\"dewPoint\":10.43,\"humidity\":0.86,\"pressure\":1024.89,\"windSpeed\":2.58,\"windGust\":5.19,\"windBearing\":197,\"cloudCover\":1,\"uvIndex\":0,\"visibility\":11.557,\"ozone\":349.5},{\"time\":1566345600,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"precipIntensity\":0.027,\"precipProbability\":0.16,\"precipType\":\"rain\",\"temperature\":12.8,\"apparentTemperature\":12.8,\"dewPoint\":10.61,\"humidity\":0.87,\"pressure\":1025.13,\"windSpeed\":3.14,\"windGust\":5.46,\"windBearing\":213,\"cloudCover\":0.95,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":349.8},{\"time\":1566349200,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0076,\"precipProbability\":0.04,\"precipType\":\"rain\",\"temperature\":12.79,\"apparentTemperature\":12.79,\"dewPoint\":10.53,\"humidity\":0.86,\"pressure\":1024.78,\"windSpeed\":3.63,\"windGust\":5.65,\"windBearing\":218,\"cloudCover\":0.73,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":346.8},{\"time\":1566352800,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0071,\"precipProbability\":0.04,\"precipType\":\"rain\",\"temperature\":12.73,\"apparentTemperature\":12.73,\"dewPoint\":10.47,\"humidity\":0.86,\"pressure\":1024.3,\"windSpeed\":3.94,\"windGust\":5.99,\"windBearing\":214,\"cloudCover\":0.6,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":342},{\"time\":1566356400,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0089,\"precipProbability\":0.03,\"precipType\":\"rain\",\"temperature\":12.81,\"apparentTemperature\":12.81,\"dewPoint\":10.55,\"humidity\":0.86,\"pressure\":1024.07,\"windSpeed\":4.34,\"windGust\":6.8,\"windBearing\":211,\"cloudCover\":0.51,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":337.9},{\"time\":1566360000,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.01,\"precipProbability\":0.04,\"precipType\":\"rain\",\"temperature\":12.71,\"apparentTemperature\":12.71,\"dewPoint\":10.86,\"humidity\":0.89,\"pressure\":1023.85,\"windSpeed\":4.73,\"windGust\":8.37,\"windBearing\":210,\"cloudCover\":0.5,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":335.2},{\"time\":1566363600,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0108,\"precipProbability\":0.04,\"precipType\":\"rain\",\"temperature\":12.76,\"apparentTemperature\":12.76,\"dewPoint\":11.27,\"humidity\":0.91,\"pressure\":1023.69,\"windSpeed\":5.16,\"windGust\":10.24,\"windBearing\":210,\"cloudCover\":0.52,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":332.8},{\"time\":1566367200,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0127,\"precipProbability\":0.05,\"precipType\":\"rain\",\"temperature\":13.29,\"apparentTemperature\":13.29,\"dewPoint\":11.58,\"humidity\":0.89,\"pressure\":1023.53,\"windSpeed\":5.73,\"windGust\":11.59,\"windBearing\":212,\"cloudCover\":0.56,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":331.3},{\"time\":1566370800,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0171,\"precipProbability\":0.05,\"precipType\":\"rain\",\"temperature\":14.18,\"apparentTemperature\":14.18,\"dewPoint\":11.93,\"humidity\":0.86,\"pressure\":1023.21,\"windSpeed\":6.64,\"windGust\":12.16,\"windBearing\":211,\"cloudCover\":0.67,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":331},{\"time\":1566374400,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0243,\"precipProbability\":0.06,\"precipType\":\"rain\",\"temperature\":15,\"apparentTemperature\":15,\"dewPoint\":12.27,\"humidity\":0.84,\"pressure\":1022.95,\"windSpeed\":7.81,\"windGust\":12.37,\"windBearing\":211,\"cloudCover\":0.81,\"uvIndex\":1,\"visibility\":16.093,\"ozone\":331.6},{\"time\":1566378000,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"precipIntensity\":0.0287,\"precipProbability\":0.07,\"precipType\":\"rain\",\"temperature\":15.64,\"apparentTemperature\":15.64,\"dewPoint\":12.12,\"humidity\":0.8,\"pressure\":1022.68,\"windSpeed\":8.79,\"windGust\":12.59,\"windBearing\":210,\"cloudCover\":0.93,\"uvIndex\":2,\"visibility\":16.093,\"ozone\":331.5},{\"time\":1566381600,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"precipIntensity\":0.0226,\"precipProbability\":0.09,\"precipType\":\"rain\",\"temperature\":16.17,\"apparentTemperature\":16.17,\"dewPoint\":11.98,\"humidity\":0.76,\"pressure\":1022.3,\"windSpeed\":9.33,\"windGust\":12.93,\"windBearing\":211,\"cloudCover\":0.96,\"uvIndex\":2,\"visibility\":16.093,\"ozone\":329.9},{\"time\":1566385200,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"precipIntensity\":0.0226,\"precipProbability\":0.14,\"precipType\":\"rain\",\"temperature\":16.58,\"apparentTemperature\":16.58,\"dewPoint\":11.94,\"humidity\":0.74,\"pressure\":1021.88,\"windSpeed\":9.64,\"windGust\":13.29,\"windBearing\":212,\"cloudCover\":0.98,\"uvIndex\":3,\"visibility\":16.093,\"ozone\":327.8},{\"time\":1566388800,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"precipIntensity\":0.0306,\"precipProbability\":0.14,\"precipType\":\"rain\",\"temperature\":17.54,\"apparentTemperature\":17.54,\"dewPoint\":12.12,\"humidity\":0.71,\"pressure\":1021.55,\"windSpeed\":9.81,\"windGust\":13.68,\"windBearing\":213,\"cloudCover\":1,\"uvIndex\":3,\"visibility\":16.093,\"ozone\":326},{\"time\":1566392400,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"precipIntensity\":0.0424,\"precipProbability\":0.14,\"precipType\":\"rain\",\"temperature\":17.1,\"apparentTemperature\":17.1,\"dewPoint\":12.13,\"humidity\":0.73,\"pressure\":1021.28,\"windSpeed\":9.83,\"windGust\":14.13,\"windBearing\":214,\"cloudCover\":1,\"uvIndex\":3,\"visibility\":16.093,\"ozone\":324.9},{\"time\":1566396000,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"precipIntensity\":0.0826,\"precipProbability\":0.22,\"precipType\":\"rain\",\"temperature\":16.46,\"apparentTemperature\":16.46,\"dewPoint\":12.28,\"humidity\":0.76,\"pressure\":1021.29,\"windSpeed\":9.72,\"windGust\":14.6,\"windBearing\":213,\"cloudCover\":1,\"uvIndex\":3,\"visibility\":16.093,\"ozone\":324.4},{\"time\":1566399600,\"summary\":\"Можливий Незначний Дощ\",\"icon\":\"rain\",\"precipIntensity\":0.1425,\"precipProbability\":0.31,\"precipType\":\"rain\",\"temperature\":16.06,\"apparentTemperature\":16.06,\"dewPoint\":12.52,\"humidity\":0.8,\"pressure\":1021.19,\"windSpeed\":9.56,\"windGust\":14.98,\"windBearing\":214,\"cloudCover\":1,\"uvIndex\":3,\"visibility\":16.093,\"ozone\":323.9},{\"time\":1566403200,\"summary\":\"Можливий Незначний Дощ\",\"icon\":\"rain\",\"precipIntensity\":0.2137,\"precipProbability\":0.4,\"precipType\":\"rain\",\"temperature\":15.91,\"apparentTemperature\":15.91,\"dewPoint\":12.6,\"humidity\":0.81,\"pressure\":1020.76,\"windSpeed\":9.42,\"windGust\":15.27,\"windBearing\":216,\"cloudCover\":1,\"uvIndex\":2,\"visibility\":16.093,\"ozone\":323.7},{\"time\":1566406800,\"summary\":\"Можливий Незначний Дощ\",\"icon\":\"rain\",\"precipIntensity\":0.3414,\"precipProbability\":0.48,\"precipType\":\"rain\",\"temperature\":15.76,\"apparentTemperature\":15.76,\"dewPoint\":12.67,\"humidity\":0.82,\"pressure\":1020.42,\"windSpeed\":9.24,\"windGust\":15.45,\"windBearing\":217,\"cloudCover\":1,\"uvIndex\":1,\"visibility\":16.093,\"ozone\":323.7},{\"time\":1566410400,\"summary\":\"Можливий Невеликий Дощ\",\"icon\":\"rain\",\"precipIntensity\":0.4448,\"precipProbability\":0.48,\"precipType\":\"rain\",\"temperature\":15.99,\"apparentTemperature\":15.99,\"dewPoint\":12.8,\"humidity\":0.81,\"pressure\":1020.21,\"windSpeed\":8.92,\"windGust\":15.33,\"windBearing\":219,\"cloudCover\":1,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":323.6},{\"time\":1566414000,\"summary\":\"Можливий Невеликий Дощ\",\"icon\":\"rain\",\"precipIntensity\":0.4072,\"precipProbability\":0.44,\"precipType\":\"rain\",\"temperature\":16.09,\"apparentTemperature\":16.09,\"dewPoint\":13.03,\"humidity\":0.82,\"pressure\":1020.19,\"windSpeed\":8.38,\"windGust\":14.76,\"windBearing\":223,\"cloudCover\":0.99,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":323.6},{\"time\":1566417600,\"summary\":\"Можливий Незначний Дощ\",\"icon\":\"rain\",\"precipIntensity\":0.3178,\"precipProbability\":0.35,\"precipType\":\"rain\",\"temperature\":16.23,\"apparentTemperature\":16.23,\"dewPoint\":13.25,\"humidity\":0.83,\"pressure\":1020.31,\"windSpeed\":7.71,\"windGust\":13.87,\"windBearing\":227,\"cloudCover\":0.97,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":323.5},{\"time\":1566421200,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"precipIntensity\":0.2379,\"precipProbability\":0.24,\"precipType\":\"rain\",\"temperature\":16.06,\"apparentTemperature\":16.06,\"dewPoint\":13.32,\"humidity\":0.84,\"pressure\":1020.47,\"windSpeed\":7.04,\"windGust\":12.98,\"windBearing\":231,\"cloudCover\":0.95,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":323.2},{\"time\":1566424800,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.1321,\"precipProbability\":0.17,\"precipType\":\"rain\",\"temperature\":15.62,\"apparentTemperature\":15.62,\"dewPoint\":13.19,\"humidity\":0.85,\"pressure\":1020.71,\"windSpeed\":6.32,\"windGust\":12.09,\"windBearing\":236,\"cloudCover\":0.86,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":322.8},{\"time\":1566428400,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0506,\"precipProbability\":0.1,\"precipType\":\"rain\",\"temperature\":15.15,\"apparentTemperature\":15.15,\"dewPoint\":13.1,\"humidity\":0.88,\"pressure\":1020.86,\"windSpeed\":5.55,\"windGust\":11.18,\"windBearing\":240,\"cloudCover\":0.76,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":322.2},{\"time\":1566432000,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0256,\"precipProbability\":0.06,\"precipType\":\"rain\",\"temperature\":14.73,\"apparentTemperature\":14.73,\"dewPoint\":12.82,\"humidity\":0.88,\"pressure\":1020.7,\"windSpeed\":4.93,\"windGust\":10.48,\"windBearing\":242,\"cloudCover\":0.69,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":321.5},{\"time\":1566435600,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0125,\"precipProbability\":0.04,\"precipType\":\"rain\",\"temperature\":14.35,\"apparentTemperature\":14.35,\"dewPoint\":12.57,\"humidity\":0.89,\"pressure\":1020.84,\"windSpeed\":4.57,\"windGust\":10.14,\"windBearing\":240,\"cloudCover\":0.67,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":320.4},{\"time\":1566439200,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0055,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperature\":14.05,\"apparentTemperature\":14.05,\"dewPoint\":12.35,\"humidity\":0.89,\"pressure\":1020.53,\"windSpeed\":4.39,\"windGust\":10,\"windBearing\":236,\"cloudCover\":0.67,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":319},{\"time\":1566442800,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0081,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperature\":13.88,\"apparentTemperature\":13.88,\"dewPoint\":12.2,\"humidity\":0.9,\"pressure\":1020.72,\"windSpeed\":4.27,\"windGust\":9.81,\"windBearing\":233,\"cloudCover\":0.66,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":318},{\"time\":1566446400,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0122,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperature\":13.57,\"apparentTemperature\":13.57,\"dewPoint\":12.15,\"humidity\":0.91,\"pressure\":1020.96,\"windSpeed\":4.13,\"windGust\":9.29,\"windBearing\":232,\"cloudCover\":0.63,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":317.7},{\"time\":1566450000,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0184,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperature\":13.26,\"apparentTemperature\":13.26,\"dewPoint\":12.19,\"humidity\":0.93,\"pressure\":1021.08,\"windSpeed\":4.06,\"windGust\":8.67,\"windBearing\":232,\"cloudCover\":0.59,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":317.8},{\"time\":1566453600,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0254,\"precipProbability\":0.03,\"precipType\":\"rain\",\"temperature\":13.6,\"apparentTemperature\":13.6,\"dewPoint\":12.43,\"humidity\":0.93,\"pressure\":1021.32,\"windSpeed\":4.22,\"windGust\":8.5,\"windBearing\":232,\"cloudCover\":0.58,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":317.5},{\"time\":1566457200,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0318,\"precipProbability\":0.04,\"precipType\":\"rain\",\"temperature\":14.6,\"apparentTemperature\":14.6,\"dewPoint\":13.05,\"humidity\":0.9,\"pressure\":1021.64,\"windSpeed\":4.75,\"windGust\":9.12,\"windBearing\":231,\"cloudCover\":0.62,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":316.5},{\"time\":1566460800,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0473,\"precipProbability\":0.05,\"precipType\":\"rain\",\"temperature\":15.72,\"apparentTemperature\":15.72,\"dewPoint\":13.73,\"humidity\":0.88,\"pressure\":1022.11,\"windSpeed\":5.49,\"windGust\":10.19,\"windBearing\":230,\"cloudCover\":0.69,\"uvIndex\":1,\"visibility\":16.093,\"ozone\":315.2},{\"time\":1566464400,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0598,\"precipProbability\":0.05,\"precipType\":\"rain\",\"temperature\":16.6,\"apparentTemperature\":16.6,\"dewPoint\":14.1,\"humidity\":0.85,\"pressure\":1022.18,\"windSpeed\":6.12,\"windGust\":11.03,\"windBearing\":229,\"cloudCover\":0.73,\"uvIndex\":2,\"visibility\":16.093,\"ozone\":314},{\"time\":1566468000,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0498,\"precipProbability\":0.04,\"precipType\":\"rain\",\"temperature\":17.6,\"apparentTemperature\":17.6,\"dewPoint\":14.36,\"humidity\":0.81,\"pressure\":1022.11,\"windSpeed\":6.56,\"windGust\":11.44,\"windBearing\":229,\"cloudCover\":0.74,\"uvIndex\":3,\"visibility\":16.093,\"ozone\":313.2},{\"time\":1566471600,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.036,\"precipProbability\":0.03,\"precipType\":\"rain\",\"temperature\":18.44,\"apparentTemperature\":18.44,\"dewPoint\":14.51,\"humidity\":0.78,\"pressure\":1021.78,\"windSpeed\":6.9,\"windGust\":11.65,\"windBearing\":227,\"cloudCover\":0.75,\"uvIndex\":4,\"visibility\":16.093,\"ozone\":312.5},{\"time\":1566475200,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0296,\"precipProbability\":0.03,\"precipType\":\"rain\",\"temperature\":19.41,\"apparentTemperature\":19.41,\"dewPoint\":14.68,\"humidity\":0.74,\"pressure\":1021.58,\"windSpeed\":7.1,\"windGust\":11.67,\"windBearing\":227,\"cloudCover\":0.77,\"uvIndex\":4,\"visibility\":16.093,\"ozone\":312.2},{\"time\":1566478800,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0174,\"precipProbability\":0.03,\"precipType\":\"rain\",\"temperature\":20.25,\"apparentTemperature\":20.25,\"dewPoint\":14.86,\"humidity\":0.71,\"pressure\":1021.54,\"windSpeed\":7.16,\"windGust\":11.38,\"windBearing\":228,\"cloudCover\":0.81,\"uvIndex\":4,\"visibility\":16.093,\"ozone\":312.8},{\"time\":1566482400,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0082,\"precipProbability\":0.03,\"precipType\":\"rain\",\"temperature\":20.78,\"apparentTemperature\":20.78,\"dewPoint\":15,\"humidity\":0.7,\"pressure\":1021.79,\"windSpeed\":7.09,\"windGust\":10.89,\"windBearing\":229,\"cloudCover\":0.85,\"uvIndex\":3,\"visibility\":16.093,\"ozone\":313.8},{\"time\":1566486000,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"precipIntensity\":0.007,\"precipProbability\":0.03,\"precipType\":\"rain\",\"temperature\":20.72,\"apparentTemperature\":20.72,\"dewPoint\":14.91,\"humidity\":0.69,\"pressure\":1021.93,\"windSpeed\":6.94,\"windGust\":10.49,\"windBearing\":230,\"cloudCover\":0.88,\"uvIndex\":3,\"visibility\":16.093,\"ozone\":314.1},{\"time\":1566489600,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0082,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperature\":20.21,\"apparentTemperature\":20.21,\"dewPoint\":14.75,\"humidity\":0.71,\"pressure\":1021.95,\"windSpeed\":6.72,\"windGust\":10.25,\"windBearing\":231,\"cloudCover\":0.86,\"uvIndex\":2,\"visibility\":16.093,\"ozone\":313.2},{\"time\":1566493200,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0094,\"precipProbability\":0.03,\"precipType\":\"rain\",\"temperature\":19.31,\"apparentTemperature\":19.31,\"dewPoint\":14.52,\"humidity\":0.74,\"pressure\":1021.91,\"windSpeed\":6.41,\"windGust\":10.09,\"windBearing\":232,\"cloudCover\":0.82,\"uvIndex\":1,\"visibility\":16.093,\"ozone\":311.6},{\"time\":1566496800,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.01,\"precipProbability\":0.03,\"precipType\":\"rain\",\"temperature\":19.02,\"apparentTemperature\":19.02,\"dewPoint\":14.4,\"humidity\":0.75,\"pressure\":1021.98,\"windSpeed\":6.05,\"windGust\":9.96,\"windBearing\":231,\"cloudCover\":0.81,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":310.5},{\"time\":1566500400,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-day\",\"precipIntensity\":0.0083,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperature\":18.31,\"apparentTemperature\":18.31,\"dewPoint\":14.05,\"humidity\":0.76,\"pressure\":1022.3,\"windSpeed\":5.62,\"windGust\":9.86,\"windBearing\":229,\"cloudCover\":0.83,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":310.5},{\"time\":1566504000,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.007,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperature\":17.65,\"apparentTemperature\":17.65,\"dewPoint\":13.83,\"humidity\":0.78,\"pressure\":1022.77,\"windSpeed\":5.1,\"windGust\":9.81,\"windBearing\":226,\"cloudCover\":0.86,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":311},{\"time\":1566507600,\"summary\":\"Сильна Хмарність\",\"icon\":\"cloudy\",\"precipIntensity\":0.0074,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperature\":16.83,\"apparentTemperature\":16.83,\"dewPoint\":13.67,\"humidity\":0.82,\"pressure\":1023.11,\"windSpeed\":4.72,\"windGust\":9.81,\"windBearing\":223,\"cloudCover\":0.88,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":311.2},{\"time\":1566511200,\"summary\":\"Хмарно\",\"icon\":\"partly-cloudy-night\",\"precipIntensity\":0.0111,\"precipProbability\":0.02,\"precipType\":\"rain\",\"temperature\":16.36,\"apparentTemperature\":16.36,\"dewPoint\":13.67,\"humidity\":0.84,\"pressure\":1023.18,\"windSpeed\":4.61,\"windGust\":9.89,\"windBearing\":221,\"cloudCover\":0.87,\"uvIndex\":0,\"visibility\":16.093,\"ozone\":310.8}]},\"daily\":{\"summary\":\"Невеликий дощ сьогодні і до четверга, з температурою, що піднімається до 23°C в неділю.\",\"icon\":\"rain\",\"data\":[{\"time\":1566255600,\"summary\":\"Можливий невеликий дощ вранці і вдень.\",\"icon\":\"rain\",\"sunriseTime\":1566278858,\"sunsetTime\":1566330606,\"moonPhase\":0.66,\"precipIntensity\":0.108,\"precipIntensityMax\":0.5518,\"precipIntensityMaxTime\":1566291600,\"precipProbability\":0.67,\"precipType\":\"rain\",\"temperatureHigh\":18.48,\"temperatureHighTime\":1566316800,\"temperatureLow\":12.71,\"temperatureLowTime\":1566360000,\"apparentTemperatureHigh\":18.48,\"apparentTemperatureHighTime\":1566316800,\"apparentTemperatureLow\":12.71,\"apparentTemperatureLowTime\":1566360000,\"dewPoint\":10.17,\"humidity\":0.78,\"pressure\":1023.19,\"windSpeed\":4,\"windGust\":9.08,\"windGustTime\":1566313200,\"windBearing\":232,\"cloudCover\":0.64,\"uvIndex\":4,\"uvIndexTime\":1566302400,\"visibility\":10.064,\"ozone\":349.9,\"temperatureMin\":8.5,\"temperatureMinTime\":1566259200,\"temperatureMax\":18.48,\"temperatureMaxTime\":1566316800,\"apparentTemperatureMin\":6.8,\"apparentTemperatureMinTime\":1566259200,\"apparentTemperatureMax\":18.48,\"apparentTemperatureMaxTime\":1566316800},{\"time\":1566342000,\"summary\":\"Можливий невеликий дощ вдень і ввечері.\",\"icon\":\"rain\",\"sunriseTime\":1566365355,\"sunsetTime\":1566416880,\"moonPhase\":0.69,\"precipIntensity\":0.1051,\"precipIntensityMax\":0.4448,\"precipIntensityMaxTime\":1566410400,\"precipProbability\":0.68,\"precipType\":\"rain\",\"temperatureHigh\":17.54,\"temperatureHighTime\":1566388800,\"temperatureLow\":13.26,\"temperatureLowTime\":1566450000,\"apparentTemperatureHigh\":17.54,\"apparentTemperatureHighTime\":1566388800,\"apparentTemperatureLow\":13.26,\"apparentTemperatureLowTime\":1566450000,\"dewPoint\":11.98,\"humidity\":0.83,\"pressure\":1022.26,\"windSpeed\":7.08,\"windGust\":15.45,\"windGustTime\":1566406800,\"windBearing\":216,\"cloudCover\":0.85,\"uvIndex\":3,\"uvIndexTime\":1566392400,\"visibility\":15.912,\"ozone\":330.5,\"temperatureMin\":12.71,\"temperatureMinTime\":1566360000,\"temperatureMax\":17.54,\"temperatureMaxTime\":1566388800,\"apparentTemperatureMin\":12.71,\"apparentTemperatureMinTime\":1566360000,\"apparentTemperatureMax\":17.54,\"apparentTemperatureMaxTime\":1566388800},{\"time\":1566428400,\"summary\":\"Хмарно протягом всього дня.\",\"icon\":\"rain\",\"sunriseTime\":1566451853,\"sunsetTime\":1566503153,\"moonPhase\":0.72,\"precipIntensity\":0.0212,\"precipIntensityMax\":0.0598,\"precipIntensityMaxTime\":1566464400,\"precipProbability\":0.33,\"precipType\":\"rain\",\"temperatureHigh\":20.78,\"temperatureHighTime\":1566482400,\"temperatureLow\":14.63,\"temperatureLowTime\":1566536400,\"apparentTemperatureHigh\":20.78,\"apparentTemperatureHighTime\":1566482400,\"apparentTemperatureLow\":14.63,\"apparentTemperatureLowTime\":1566536400,\"dewPoint\":13.67,\"humidity\":0.82,\"pressure\":1021.76,\"windSpeed\":5.53,\"windGust\":11.67,\"windGustTime\":1566475200,\"windBearing\":230,\"cloudCover\":0.75,\"uvIndex\":4,\"uvIndexTime\":1566475200,\"visibility\":16.093,\"ozone\":314.7,\"temperatureMin\":13.26,\"temperatureMinTime\":1566450000,\"temperatureMax\":20.78,\"temperatureMaxTime\":1566482400,\"apparentTemperatureMin\":13.26,\"apparentTemperatureMinTime\":1566450000,\"apparentTemperatureMax\":20.78,\"apparentTemperatureMaxTime\":1566482400},{\"time\":1566514800,\"summary\":\"Хмарно протягом всього дня.\",\"icon\":\"partly-cloudy-day\",\"sunriseTime\":1566538351,\"sunsetTime\":1566589425,\"moonPhase\":0.76,\"precipIntensity\":0.0337,\"precipIntensityMax\":0.0676,\"precipIntensityMaxTime\":1566594000,\"precipProbability\":0.21,\"precipType\":\"rain\",\"temperatureHigh\":18.93,\"temperatureHighTime\":1566568800,\"temperatureLow\":15.75,\"temperatureLowTime\":1566608400,\"apparentTemperatureHigh\":18.93,\"apparentTemperatureHighTime\":1566568800,\"apparentTemperatureLow\":15.75,\"apparentTemperatureLowTime\":1566608400,\"dewPoint\":13.76,\"humidity\":0.84,\"pressure\":1022.07,\"windSpeed\":4.57,\"windGust\":10.01,\"windGustTime\":1566514800,\"windBearing\":190,\"cloudCover\":0.86,\"uvIndex\":4,\"uvIndexTime\":1566565200,\"visibility\":16.093,\"ozone\":306.4,\"temperatureMin\":14.63,\"temperatureMinTime\":1566536400,\"temperatureMax\":18.93,\"temperatureMaxTime\":1566568800,\"apparentTemperatureMin\":14.63,\"apparentTemperatureMinTime\":1566536400,\"apparentTemperatureMax\":18.93,\"apparentTemperatureMaxTime\":1566568800},{\"time\":1566601200,\"summary\":\"Сильна хмарність протягом всього дня.\",\"icon\":\"cloudy\",\"sunriseTime\":1566624848,\"sunsetTime\":1566675697,\"moonPhase\":0.79,\"precipIntensity\":0.0446,\"precipIntensityMax\":0.163,\"precipIntensityMaxTime\":1566684000,\"precipProbability\":0.23,\"precipType\":\"rain\",\"temperatureHigh\":21.87,\"temperatureHighTime\":1566651600,\"temperatureLow\":13.69,\"temperatureLowTime\":1566709200,\"apparentTemperatureHigh\":21.87,\"apparentTemperatureHighTime\":1566651600,\"apparentTemperatureLow\":13.69,\"apparentTemperatureLowTime\":1566709200,\"dewPoint\":14.13,\"humidity\":0.78,\"pressure\":1016.9,\"windSpeed\":3.42,\"windGust\":6.19,\"windGustTime\":1566601200,\"windBearing\":156,\"cloudCover\":0.99,\"uvIndex\":4,\"uvIndexTime\":1566651600,\"visibility\":15.913,\"ozone\":306.7,\"temperatureMin\":15.75,\"temperatureMinTime\":1566608400,\"temperatureMax\":21.87,\"temperatureMaxTime\":1566651600,\"apparentTemperatureMin\":15.75,\"apparentTemperatureMinTime\":1566608400,\"apparentTemperatureMax\":21.87,\"apparentTemperatureMaxTime\":1566651600},{\"time\":1566687600,\"summary\":\"Хмарно протягом всього дня.\",\"icon\":\"partly-cloudy-day\",\"sunriseTime\":1566711346,\"sunsetTime\":1566761967,\"moonPhase\":0.82,\"precipIntensity\":0.0143,\"precipIntensityMax\":0.1419,\"precipIntensityMaxTime\":1566687600,\"precipProbability\":0.13,\"precipType\":\"rain\",\"temperatureHigh\":23.22,\"temperatureHighTime\":1566741600,\"temperatureLow\":11.11,\"temperatureLowTime\":1566795600,\"apparentTemperatureHigh\":23.22,\"apparentTemperatureHighTime\":1566741600,\"apparentTemperatureLow\":11.11,\"apparentTemperatureLowTime\":1566795600,\"dewPoint\":12.6,\"humidity\":0.72,\"pressure\":1019.26,\"windSpeed\":3.6,\"windGust\":7.56,\"windGustTime\":1566766800,\"windBearing\":338,\"cloudCover\":0.71,\"uvIndex\":4,\"uvIndexTime\":1566734400,\"visibility\":16.093,\"ozone\":305.6,\"temperatureMin\":13.69,\"temperatureMinTime\":1566709200,\"temperatureMax\":23.22,\"temperatureMaxTime\":1566741600,\"apparentTemperatureMin\":13.69,\"apparentTemperatureMinTime\":1566709200,\"apparentTemperatureMax\":23.22,\"apparentTemperatureMaxTime\":1566741600},{\"time\":1566774000,\"summary\":\"Невелика хмарність протягом всього дня.\",\"icon\":\"clear-day\",\"sunriseTime\":1566797843,\"sunsetTime\":1566848236,\"moonPhase\":0.86,\"precipIntensity\":0.0026,\"precipIntensityMax\":0.0094,\"precipIntensityMaxTime\":1566777600,\"precipProbability\":0.04,\"precipType\":\"rain\",\"temperatureHigh\":22.96,\"temperatureHighTime\":1566828000,\"temperatureLow\":15.44,\"temperatureLowTime\":1566864000,\"apparentTemperatureHigh\":22.96,\"apparentTemperatureHighTime\":1566828000,\"apparentTemperatureLow\":15.44,\"apparentTemperatureLowTime\":1566864000,\"dewPoint\":12.43,\"humidity\":0.75,\"pressure\":1021.88,\"windSpeed\":2.74,\"windGust\":6.44,\"windGustTime\":1566774000,\"windBearing\":184,\"cloudCover\":0.3,\"uvIndex\":6,\"uvIndexTime\":1566824400,\"visibility\":16.093,\"ozone\":285.3,\"temperatureMin\":11.11,\"temperatureMinTime\":1566795600,\"temperatureMax\":22.96,\"temperatureMaxTime\":1566828000,\"apparentTemperatureMin\":11.11,\"apparentTemperatureMinTime\":1566795600,\"apparentTemperatureMax\":22.96,\"apparentTemperatureMaxTime\":1566828000},{\"time\":1566860400,\"summary\":\"Хмарно протягом всього дня.\",\"icon\":\"partly-cloudy-day\",\"sunriseTime\":1566884341,\"sunsetTime\":1566934505,\"moonPhase\":0.9,\"precipIntensity\":0.0014,\"precipIntensityMax\":0.0062,\"precipIntensityMaxTime\":1566907200,\"precipProbability\":0.04,\"precipType\":\"rain\",\"temperatureHigh\":22.01,\"temperatureHighTime\":1566910800,\"temperatureLow\":16.18,\"temperatureLowTime\":1566968400,\"apparentTemperatureHigh\":22.01,\"apparentTemperatureHighTime\":1566910800,\"apparentTemperatureLow\":16.18,\"apparentTemperatureLowTime\":1566968400,\"dewPoint\":14.12,\"humidity\":0.77,\"pressure\":1018.59,\"windSpeed\":3.99,\"windGust\":7.64,\"windGustTime\":1566907200,\"windBearing\":181,\"cloudCover\":0.55,\"uvIndex\":4,\"uvIndexTime\":1566907200,\"visibility\":16.093,\"ozone\":291,\"temperatureMin\":15.44,\"temperatureMinTime\":1566864000,\"temperatureMax\":22.01,\"temperatureMaxTime\":1566910800,\"apparentTemperatureMin\":15.44,\"apparentTemperatureMinTime\":1566864000,\"apparentTemperatureMax\":22.01,\"apparentTemperatureMaxTime\":1566910800}]},\"flags\":{\"sources\":[\"meteoalarm\",\"cmc\",\"gfs\",\"icon\",\"isd\",\"madis\",\"darksky\",\"nearest-precip\"],\"meteoalarm-license\":\"Based on data from EUMETNET - MeteoAlarm [https://www.meteoalarm.eu/]. Time delays between this website and the MeteoAlarm website are possible; for the most up to date information about alert levels as published by the participating National Meteorological Services please use the MeteoAlarm website.\",\"nearest-station\":5.45,\"units\":\"si\"},\"offset\":1}\n";

    /**
     * Processing metod which combines multiple actios:
     * make network request using getResponseFromHttpUrl metod
     * parse response using extractJSONrequest metod
     * insert new data to db
     * Return true if success or false if not
     */
    public static boolean updateWeatherData(Context context){

        try {

            String jsonResponse = getResponseFromHttpUrl(buildUrlWithLatitudeLongitude(51.896893,-8.486316));

            WeatherItem newData = extractJSONrequest(jsonResponse);

            WeatherDB db = WeatherDB.getInstance(context);
            if (newData != null) {
                //delete all data in db
                db.weatherDao().deleteAll();
                db.weatherDao().insertWeatherItem(newData);
            } else
                return false;

        } catch (Exception e) {
            /* Server probably invalid */
            e.printStackTrace();
            return false;
        }
        return true;
    }


    /**
     * Return an {@link WeatherItem} object that has been built up from
     * parsing a JSON response.
     */
    private static WeatherItem extractJSONrequest(String jsonRequest) {

        WeatherItem item = null;

        try {

            long dateTimeMillis;
            String summary;
            String icon;
            double pressure;
            double humidity;
            double windSpeed;
            int windDirection;
            double temperature;

            JSONObject root = new JSONObject(jsonRequest);
            JSONObject currently = root.getJSONObject("currently");

            dateTimeMillis = currently.optLong("time");
            summary = currently.optString("summary");
            icon = currently.optString("icon");
            pressure = currently.optDouble("pressure");
            humidity = currently.optDouble("humidity");
            windSpeed = currently.optDouble("windSpeed");
            windDirection = currently.optInt("windDirection");
            temperature = currently.optDouble("temperature");

            item = new WeatherItem(dateTimeMillis,summary,icon,pressure,humidity,windSpeed,windDirection,temperature);

        } catch (JSONException e) {
            Log.e(LOG_TAG, "Problem parsing JSON results", e);
        }
        return item;
    }

    /**
     * Builds the URL used to talk to the weather server using latitude and longitude of a
     * location.
     *
     * @param latitude  The latitude of the location
     * @param longitude The longitude of the location
     * @return The Url to use to query the weather server.
     */
    private static URL buildUrlWithLatitudeLongitude(Double latitude, Double longitude) {
        Uri weatherQueryUri = Uri.parse(FORECAST_BASE_URL).buildUpon()
                .appendPath(key)
                .appendPath(latitude+","+longitude)
                .appendQueryParameter(LANG_PARAM, lang)
                .appendQueryParameter(UNITS_PARAM, units)
                .build();

        try {
            URL weatherQueryUrl = new URL(weatherQueryUri.toString());
            Log.v(LOG_TAG, "URL: " + weatherQueryUrl);
            return weatherQueryUrl;
        } catch (MalformedURLException e) {
            e.printStackTrace();
            return null;
        }
    }

    /**
     * This method returns the entire result from the HTTP response.
     *
     * @param url The URL to fetch the HTTP response from.
     * @return The contents of the HTTP response, null if no response
     * @throws IOException Related to network and stream reading
     */
    private static String getResponseFromHttpUrl(URL url) throws IOException {
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        try {
            InputStream in = urlConnection.getInputStream();

            Scanner scanner = new Scanner(in);
            scanner.useDelimiter("\\A");

            boolean hasInput = scanner.hasNext();
            String response = null;
            if (hasInput) {
                response = scanner.next();
            }
            scanner.close();
            return response;
        } finally {
            urlConnection.disconnect();
        }
    }
}
